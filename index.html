<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Laporan Penjualan Raja Susu</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
/* ========================================
        GLOBAL
========================================= */
body {
  font-family: 'Poppins', sans-serif;
  margin: 0;
  padding: 20px;
  background: #f3f4f6;
  color: #333;
}

.container {
  max-width: 1200px;
  margin: auto;
}

.title {
  text-align: center;
  font-weight: 600;
  margin-bottom: 10px;
}

.status {
  text-align: center;
  font-size: 14px;
  margin-bottom: 20px;
}

/* ========================================
        CARD
========================================= */
.card {
  background: #fff;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.06);
  margin-bottom: 25px;
}

.card h2 {
  margin-bottom: 15px;
}

/* ========================================
        FORM INPUT
========================================= */
.form-row {
  display: flex;
  flex-direction: column;
  margin-bottom: 12px;
}

.form-row label {
  font-weight: 500;
  margin-bottom: 4px;
}

.form-row input {
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #ccc;
  outline: none;
}

.grid-3 {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: 10px;
}

hr {
  margin: 25px 0;
  border: none;
  border-top: 1px solid #ddd;
}

/* ========================================
        DYNAMIC TABLES
========================================= */
.dyn-table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 10px;
}

.dyn-table th,
.dyn-table td {
  border: 1px solid #ddd;
  padding: 8px;
}

.dyn-table th {
  background: #f1f1f1;
  text-align: left;
}

.btn-add {
  padding: 8px 12px;
  background: #2563eb;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  margin-bottom: 15px;
}

.btn-add:hover {
  background: #1d4ed8;
}

.btn-delete {
  padding: 6px 10px;
  background: #dc2626;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}

.btn-delete:hover {
  background: #b91c1c;
}

/* ========================================
        SAVE BUTTON
========================================= */
.btn-save {
  width: 100%;
  padding: 12px;
  background: #16a34a;
  color: white;
  font-size: 16px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
}

.btn-save:hover {
  background: #15803d;
}

/* ========================================
        REPORT PREVIEW
========================================= */
.report-card {
  background: white;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}

.report-title {
  text-align: center;
  margin-bottom: 0px;
}

.report-subtitle {
  text-align: center;
  margin-top: 5px;
}

.report-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px;
  margin-top: 20px;
}

.report-table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 20px;
}

.report-table th,
.report-table td {
  border: 1px solid #ccc;
  padding: 6px;
}

.report-table th {
  background: #f3f4f6;
}

.num {
  text-align: right;
}

.report-summary {
  margin-top: 20px;
}

.update-note {
  margin-top: 10px;
}

.sign {
  margin-top: 15px;
  text-align: right;
  font-weight: 600;
}

/* ========================================
        EXPORT BUTTONS
========================================= */
.btn-export {
  width: 49%;
  padding: 12px;
  background: #0ea5e9;
  border: none;
  color: white;
  font-size: 16px;
  border-radius: 8px;
  cursor: pointer;
  margin-top: 15px;
}

.btn-export:hover {
  background: #0284c7;
}
</style>

<!-- Firebase + Tools -->
<script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCcDwcdXRnkLaFpYT_kbbjfDwDY-zxoWWY",
  authDomain: "laporan-kopo.firebaseapp.com",
  databaseURL: "https://laporan-kopo-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "laporan-kopo",
  storageBucket: "laporan-kopo.firebasestorage.app",
  messagingSenderId: "556164034130",
  appId: "1:556164034130:web:e9f092dcc77925373c398b",
  measurementId: "G-ZTW27GVCQP"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();
</script>

</head>

<body>

<div class="container">

  <h1 class="title">Laporan Penjualan Toko Raja Susu</h1>
  <p id="status-text" class="status">Memuat data‚Ä¶</p>

  <!-- ============================
          FORM INPUT
  ============================== -->
  <div class="card">
    <h2>Input Data Penjualan</h2>

    <div class="form-row">
      <label>Tanggal</label>
      <input type="date" id="input-date">
    </div>

    <div class="form-row">
      <label>Nama Kepala Toko</label>
      <input type="text" id="input-kepala-toko">
    </div>

    <hr>

    <h3>Metode Pembayaran Non-Cash</h3>
    <div class="grid-3">
      <div class="form-row"><label>Debit BCA</label><input type="number" id="pay-debit-bca"></div>
      <div class="form-row"><label>Kredit BCA</label><input type="number" id="pay-kredit-bca"></div>
      <div class="form-row"><label>QR BCA</label><input type="number" id="pay-qr-bca"></div>

      <div class="form-row"><label>Debit Mandiri</label><input type="number" id="pay-debit-mandiri"></div>
      <div class="form-row"><label>QR Mandiri</label><input type="number" id="pay-qr-mandiri"></div>

      <div class="form-row"><label>Debit BRI</label><input type="number" id="pay-debit-bri"></div>
      <div class="form-row"><label>QR BRI</label><input type="number" id="pay-qr-bri"></div>

      <div class="form-row"><label>Debit BNI</label><input type="number" id="pay-debit-bni"></div>
      <div class="form-row"><label>Kredit BNI</label><input type="number" id="pay-kredit-bni"></div>
      <div class="form-row"><label>QR BNI</label><input type="number" id="pay-qr-bni"></div>

      <div class="form-row"><label>ShopeePay</label><input type="number" id="pay-shopeepay"></div>
      <div class="form-row"><label>Shopee</label><input type="number" id="pay-shopee"></div>
    </div>

    <hr>

    <h3>Transfer BCA</h3>
    <table class="dyn-table" id="table-transfer-bca">
      <thead><tr><th>Keterangan</th><th>Nominal</th><th>Aksi</th></tr></thead>
      <tbody></tbody>
    </table>
    <button class="btn-add" onclick="addTransferRow('bca')">+ Tambah Transfer BCA</button>

    <h3 style="margin-top:20px;">Transfer Mandiri</h3>
    <table class="dyn-table" id="table-transfer-mandiri">
      <thead><tr><th>Keterangan</th><th>Nominal</th><th>Aksi</th></tr></thead>
      <tbody></tbody>
    </table>
    <button class="btn-add" onclick="addTransferRow('mandiri')">+ Tambah Transfer Mandiri</button>

    <hr>

    <h3>Pecahan Uang Cash</h3>

    <div class="grid-3">
      <div class="form-row"><label>100.000</label><input type="number" id="denom-100k"></div>
      <div class="form-row"><label>50.000</label><input type="number" id="denom-50k"></div>
      <div class="form-row"><label>20.000</label><input type="number" id="denom-20k"></div>
      <div class="form-row"><label>10.000</label><input type="number" id="denom-10k"></div>
      <div class="form-row"><label>5.000</label><input type="number" id="denom-5k"></div>
      <div class="form-row"><label>Receh</label><input type="number" id="cash-receh"></div>
    </div>

    <hr>

    <h3>Biaya Operasional</h3>
    <table class="dyn-table" id="table-biaya">
      <thead><tr><th>Nama Biaya</th><th>Nominal</th><th>Aksi</th></tr></thead>
      <tbody></tbody>
    </table>
    <button class="btn-add" onclick="addBiayaRow()">+ Tambah Biaya</button>

    <hr>

    <h3>Piutang</h3>
    <div class="form-row">
      <label>Total Piutang Hari Ini</label>
      <input type="number" id="piutang">
    </div>

    <hr>
    <button class="btn-save" onclick="saveToServer()">üíæ Simpan ke Server</button>

  </div>

  <!-- ============================
         REPORT PREVIEW
  ============================== -->
  <div class="report-card" id="report-area">

    <h2 class="report-title">Laporan Penjualan</h2>
    <h3 class="report-subtitle">Raja Susu Bandung Kopo</h3>
    <p id="report-date"></p>

    <div class="report-grid">

      <div>
        <h4>Metode Non-Cash</h4>
        <table id="payment-table" class="report-table">
          <thead><tr><th>Item</th><th>Total</th></tr></thead>
          <tbody></tbody>
        </table>

        <h4>Transfer</h4>
        <table id="transfer-table" class="report-table">
          <thead><tr><th>Bank</th><th>Total</th></tr></thead>
          <tbody></tbody>
        </table>

        <h4>Biaya</h4>
        <table id="biaya-table" class="report-table">
          <thead><tr><th>Nama</th><th>Nominal</th></tr></thead>
          <tbody></tbody>
        </table>

        <h4>Piutang</h4>
        <table id="piutang-table" class="report-table">
          <tbody></tbody>
        </table>
      </div>

      <div>
        <h4>Pecahan Cash</h4>
        <table id="denom-table" class="report-table">
          <thead><tr><th>Nominal</th><th>Lembar</th><th>Total</th></tr></thead>
          <tbody></tbody>
        </table>

        <h4>Ringkasan Cash</h4>
        <table id="cash-summary-table" class="report-table">
          <tbody></tbody>
        </table>
      </div>

    </div>

    <div class="report-summary">
      <table>
        <tbody>
          <tr><td>Total Non-Cash</td><td id="total-non-cash" class="num">0</td></tr>
          <tr><td>Total Transfer</td><td id="total-transfer" class="num">0</td></tr>
          <tr><td>Total Biaya</td><td id="total-biaya" class="num">0</td></tr>
          <tr><td>Total Cash Fisik</td><td id="total-cash-fisik" class="num">0</td></tr>
          <tr><td>Subtotal</td><td id="subtotal" class="num">0</td></tr>
          <tr><td>Grand Total</td><td id="grandtotal" class="num">0</td></tr>
          <tr><td style="color:blue;">Plus / Minus</td><td id="plusminus" class="num">0</td></tr>
          <tr><td style="color:red;">Minus Asli</td><td id="minusasli" class="num">0</td></tr>
        </tbody>
      </table>
    </div>

    <p id="updated-at-note" class="update-note">Terakhir diperbarui: -</p>
    <p class="sign">Paraf Kepala Toko: <b id="kepala-toko-name">-</b></p>

  </div>

  <button class="btn-export" onclick="exportPDF()">üìÑ Export PDF</button>
  <button class="btn-export" onclick="exportImage()">üñº Export PNG</button>

</div>

<script>
/* =====================================================
        HELPER
===================================================== */
const fmt = n => Number(n).toLocaleString("id-ID");
const val = el => Number(document.getElementById(el).value || 0);

/* LIMIT DINAMIS */
const MAX_ROWS = 10;

/* =====================================================
  TABEL DINAMIS TRANSFER
===================================================== */
function addTransferRow(bank) {
  const tableId = bank === "bca" ? "table-transfer-bca" : "table-transfer-mandiri";
  const table = document.getElementById(tableId).querySelector("tbody");

  if (table.children.length >= MAX_ROWS) return alert("Maksimal 10 baris!");

  const row = document.createElement("tr");
  row.innerHTML = `
    <td><input type="text" class="row-name" placeholder="Keterangan"></td>
    <td><input type="number" class="row-nominal" oninput="calculate()"></td>
    <td><button class="btn-delete" onclick="removeRow(this)">‚ùå</button></td>
  `;
  table.appendChild(row);
  calculate();
}

/* =====================================================
  BIAYA DINAMIS
===================================================== */
function addBiayaRow() {
  const table = document.getElementById("table-biaya").querySelector("tbody");
  if (table.children.length >= MAX_ROWS) return alert("Maksimal 10 baris!");

  const row = document.createElement("tr");
  row.innerHTML = `
    <td><input type="text" class="row-name" placeholder="Nama Biaya"></td>
    <td><input type="number" class="row-nominal" oninput="calculate()"></td>
    <td><button class="btn-delete" onclick="removeRow(this)">‚ùå</button></td>
  `;
  table.appendChild(row);
  calculate();
}

function removeRow(btn) {
  btn.parentElement.parentElement.remove();
  calculate();
}

/* =====================================================
    HITUNG OTOMATIS MODE AKURAT
===================================================== */
function calculate() {

  /* NON-CASH */
  const nonCash = [
    val("pay-debit-bca"), val("pay-kredit-bca"), val("pay-qr-bca"),
    val("pay-debit-mandiri"), val("pay-qr-mandiri"),
    val("pay-debit-bri"), val("pay-qr-bri"),
    val("pay-debit-bni"), val("pay-kredit-bni"), val("pay-qr-bni"),
    val("pay-shopeepay"), val("pay-shopee")
  ];

  const totalNonCash = nonCash.reduce((a,b)=>a+b,0);
  document.getElementById("total-non-cash").textContent = fmt(totalNonCash);

  /* TRANSFER */
  function sumTransfer(tableId) {
    let sum = 0;
    document.querySelectorAll(`#${tableId} tbody tr`).forEach(r=>{
      sum += Number(r.querySelector(".row-nominal").value || 0);
    });
    return sum;
  }

  const totalBCA = sumTransfer("table-transfer-bca");
  const totalMAN = sumTransfer("table-transfer-mandiri");
  const totalTransfer = totalBCA + totalMAN;

  document.getElementById("total-transfer").textContent = fmt(totalTransfer);

  /* BIAYA */
  let totalBiaya = 0;
  document.querySelectorAll("#table-biaya tbody tr").forEach(r=>{
    totalBiaya += Number(r.querySelector(".row-nominal").value || 0);
  });
  document.getElementById("total-biaya").textContent = fmt(totalBiaya);

  /* CASH FISIK */
  const cashFisik =
      val("denom-100k") * 100000 +
      val("denom-50k") * 50000 +
      val("denom-20k") * 20000 +
      val("denom-10k") * 10000 +
      val("denom-5k") * 5000 +
      val("cash-receh");

  document.getElementById("total-cash-fisik").textContent = fmt(cashFisik);

  /* SUBTOTAL */
  const subtotal =
      totalNonCash +
      totalTransfer +
      cashFisik +
      val("piutang");

  document.getElementById("subtotal").textContent = fmt(subtotal);

  /* GRAND TOTAL */
  const grand = subtotal - totalBiaya;
  document.getElementById("grandtotal").textContent = fmt(grand);

  /* CASH SEHARUSNYA */
  const cashSeharusnya = grand - totalNonCash - totalTransfer - val("piutang");

  /* PLUS MINUS */
  const plusMinus = cashFisik - cashSeharusnya;
  document.getElementById("plusminus").textContent = fmt(plusMinus);

  /* MINUS ASLI */
  const minusAsli = plusMinus < 0 ? plusMinus : 0;
  document.getElementById("minusasli").textContent = fmt(minusAsli);

  /* UPDATE LAPORAN */
  renderReport();
}

/* =====================================================
        RENDER REPORT
===================================================== */
function renderReport() {

  /* --- Non Cash --- */
  const list = [
    ["Debit BCA", val("pay-debit-bca")],
    ["Kredit BCA", val("pay-kredit-bca")],
    ["QR BCA", val("pay-qr-bca")],
    ["Debit Mandiri", val("pay-debit-mandiri")],
    ["QR Mandiri", val("pay-qr-mandiri")],
    ["Debit BRI", val("pay-debit-bri")],
    ["QR BRI", val("pay-qr-bri")],
    ["Debit BNI", val("pay-debit-bni")],
    ["Kredit BNI", val("pay-kredit-bni")],
    ["QR BNI", val("pay-qr-bni")],
    ["ShopeePay", val("pay-shopeepay")],
    ["Shopee", val("pay-shopee")]
  ];

  let html = "";
  list.forEach(l=>{
    if (l[1] > 0) html += `<tr><td>${l[0]}</td><td class="num">${fmt(l[1])}</td></tr>`;
  });
  document.querySelector("#payment-table tbody").innerHTML = html;

  /* --- Transfer --- */
  document.querySelector("#transfer-table tbody").innerHTML = `
    <tr><td>BCA</td><td class="num">${fmt(sumTransfer("table-transfer-bca"))}</td></tr>
    <tr><td>Mandiri</td><td class="num">${fmt(sumTransfer("table-transfer-mandiri"))}</td></tr>
  `;

  /* --- Biaya --- */
  let biayaHTML = "";
  document.querySelectorAll("#table-biaya tbody tr").forEach(r=>{
    const nama = r.querySelector(".row-name").value;
    const nom = r.querySelector(".row-nominal").value;
    if (nom > 0) biayaHTML += `<tr><td>${nama}</td><td class="num">${fmt(nom)}</td></tr>`;
  });
  document.querySelector("#biaya-table tbody").innerHTML = biayaHTML;

  /* --- Piutang --- */
  document.querySelector("#piutang-table tbody").innerHTML =
    `<tr><td>Piutang</td><td class="num">${fmt(val("piutang"))}</td></tr>`;

  /* --- Pecahan --- */
  const denom = [
    ["100.000", val("denom-100k"), val("denom-100k") * 100000],
    ["50.000", val("denom-50k"), val("denom-50k") * 50000],
    ["20.000", val("denom-20k"), val("denom-20k") * 20000],
    ["10.000", val("denom-10k"), val("denom-10k") * 10000],
    ["5.000", val("denom-5k"), val("denom-5k") * 5000],
    ["Receh", "-", val("cash-receh")]
  ];

  let denomHTML = "";
  denom.forEach(d=>{
    denomHTML += `<tr><td>${d[0]}</td><td class="num">${d[1]}</td><td class="num">${fmt(d[2])}</td></tr>`;
  });
  document.querySelector("#denom-table tbody").innerHTML = denomHTML;

  /* HEADER REPORT */
  document.getElementById("report-date").textContent = document.getElementById("input-date").value || "-";
  document.getElementById("kepala-toko-name").textContent = document.getElementById("input-kepala-toko").value || "-";
}

/* =====================================================
        SAVE
===================================================== */
function saveToServer() {

  calculate();

  const data = {
    tanggal: document.getElementById("input-date").value,
    kepalaToko: document.getElementById("input-kepala-toko").value,

    nonCash: {
      debit_bca: val("pay-debit-bca"),
      kredit_bca: val("pay-kredit-bca"),
      qr_bca: val("pay-qr-bca"),
      debit_mandiri: val("pay-debit-mandiri"),
      qr_mandiri: val("pay-qr-mandiri"),
      debit_bri: val("pay-debit-bri"),
      qr_bri: val("pay-qr-bri"),
      debit_bni: val("pay-debit-bni"),
      kredit_bni: val("pay-kredit-bni"),
      qr_bni: val("pay-qr-bni"),
      shopeepay: val("pay-shopeepay"),
      shopee: val("pay-shopee")
    },

    transferBCA: [],
    transferMandiri: [],
    biaya: [],

    pecahan: {
      d100: val("denom-100k"),
      d50: val("denom-50k"),
      d20: val("denom-20k"),
      d10: val("denom-10k"),
      d5: val("denom-5k"),
      receh: val("cash-receh")
    },

    piutang: val("piutang"),

    hitungan: {
      totalNonCash: Number(document.getElementById("total-non-cash").textContent.replace(/\./g,"")),
      totalTransfer: Number(document.getElementById("total-transfer").textContent.replace(/\./g,"")),
      totalBiaya: Number(document.getElementById("total-biaya").textContent.replace(/\./g,"")),
      totalCashFisik: Number(document.getElementById("total-cash-fisik").textContent.replace(/\./g,"")),
      subtotal: Number(document.getElementById("subtotal").textContent.replace(/\./g,"")),
      grandtotal: Number(document.getElementById("grandtotal").textContent.replace(/\./g,"")),
      plusminus: Number(document.getElementById("plusminus").textContent.replace(/\./g,"")),
      minusasli: Number(document.getElementById("minusasli").textContent.replace(/\./g,"")),
    },

    updatedAt: new Date().toLocaleString("id-ID")
  };

  /* Transfer BCA */
  document.querySelectorAll("#table-transfer-bca tbody tr").forEach(r=>{
    data.transferBCA.push({
      ket: r.querySelector(".row-name").value,
      nominal: Number(r.querySelector(".row-nominal").value || 0)
    });
  });

  /* Transfer Mandiri */
  document.querySelectorAll("#table-transfer-mandiri tbody tr").forEach(r=>{
    data.transferMandiri.push({
      ket: r.querySelector(".row-name").value,
      nominal: Number(r.querySelector(".row-nominal").value || 0)
    });
  });

  /* Biaya */
  document.querySelectorAll("#table-biaya tbody tr").forEach(r=>{
    data.biaya.push({
      nama: r.querySelector(".row-name").value,
      nominal: Number(r.querySelector(".row-nominal").value || 0)
    });
  });

  db.ref("laporan_otomatis").set(data).then(()=>{
    alert("Data berhasil disimpan!");
    document.getElementById("updated-at-note").textContent =
      "Terakhir diperbarui: " + data.updatedAt;
  });
}

/* =====================================================
        LOAD FIREBASE
===================================================== */
db.ref("laporan_otomatis").on("value", snap => {
  if (!snap.exists()) return document.getElementById("status-text").textContent = "Belum ada data.";

  const d = snap.val();

  document.getElementById("input-date").value = d.tanggal;
  document.getElementById("input-kepala-toko").value = d.kepalaToko;

  /* Non Cash */
  for (let key in d.nonCash) {
    const id = "pay-" + key.replace("_","-");
    if (document.getElementById(id)) {
      document.getElementById(id).value = d.nonCash[key];
    }
  }

  /* Transfer BCA */
  const tb = document.querySelector("#table-transfer-bca tbody");
  tb.innerHTML = "";
  d.transferBCA?.forEach(x=>{
    addTransferRow("bca");
    const row = tb.lastElementChild;
    row.querySelector(".row-name").value = x.ket;
    row.querySelector(".row-nominal").value = x.nominal;
  });

  /* Transfer Mandiri */
  const tm = document.querySelector("#table-transfer-mandiri tbody");
  tm.innerHTML = "";
  d.transferMandiri?.forEach(x=>{
    addTransferRow("mandiri");
    const row = tm.lastElementChild;
    row.querySelector(".row-name").value = x.ket;
    row.querySelector(".row-nominal").value = x.nominal;
  });

  /* Biaya */
  const tb2 = document.querySelector("#table-biaya tbody");
  tb2.innerHTML = "";
  d.biaya?.forEach(x=>{
    addBiayaRow();
    const row = tb2.lastElementChild;
    row.querySelector(".row-name").value = x.nama;
    row.querySelector(".row-nominal").value = x.nominal;
  });

  /* Pecahan */
  document.getElementById("denom-100k").value = d.pecahan.d100;
  document.getElementById("denom-50k").value = d.pecahan.d50;
  document.getElementById("denom-20k").value = d.pecahan.d20;
  document.getElementById("denom-10k").value = d.pecahan.d10;
  document.getElementById("denom-5k").value = d.pecahan.d5;
  document.getElementById("cash-receh").value = d.pecahan.receh;

  /* Piutang */
  document.getElementById("piutang").value = d.piutang;

  /* Update note */
  document.getElementById("updated-at-note").textContent =
    "Terakhir diperbarui: " + d.updatedAt;

  calculate();
});

/* =====================================================
        EXPORT PNG
===================================================== */
async function exportImage() {
  const el = document.getElementById("report-area");
  const canvas = await html2canvas(el, { scale: 2 });
  const link = document.createElement("a");
  link.download = "laporan.png";
  link.href = canvas.toDataURL("image/png");
  link.click();
}

/* =====================================================
        EXPORT PDF
===================================================== */
async function exportPDF() {
  const el = document.getElementById("report-area");
  const canvas = await html2canvas(el, { scale: 2 });
  const img = canvas.toDataURL("image/png");

  const pdf = new jspdf.jsPDF("p", "mm", "a4");
  const width = 190;
  const height = (canvas.height * width) / canvas.width;

  pdf.addImage(img, "PNG", 10, 10, width, height);
  pdf.save("laporan.pdf");
}

/* RUN */
calculate();
</script>

</body>
</html>
